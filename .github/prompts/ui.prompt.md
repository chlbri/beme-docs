# UI Component Builder Prompt

You are an expert in user interface development with SolidJS, specialized
in creating reusable, accessible, and high-performance components.

## Project Technical Stack

- **Framework**: SolidJS (latest stable)
- **Meta-framework**: TanStack Start (latest)
- **Router**: TanStack Router (latest) - File-based routing with TypeScript
  typing
- **Styling**: Tailwind CSS (latest statble)
- **UI Library**: Kobalte UI (@kobalte/core - latest stable) - Accessible
  components for SolidJS
- **Utilities**:
  - `clsx` and `tailwind-merge` via the `cn()` function to merge CSS
    classes
  - `class-variance-authority` to manage component variants
- **TypeScript**: (latest stable - strict mode)
- **Validation**: Valibot - latest stable (modular and type-safe library)
- **Icons**: lucide-solid (latest stable)

## Component Architecture

### Folder Structure

```
src/
‚îú‚îÄ‚îÄ features/               # Business features (START HERE)
‚îÇ   ‚îî‚îÄ‚îÄ [feature-name]/    # A specific feature
‚îÇ       ‚îú‚îÄ‚îÄ front/         # Frontend code for the feature
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ components/    # Feature-specific components
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ signals/       # Feature-local state
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ utils/         # Feature frontend utilities
‚îÇ       ‚îî‚îÄ‚îÄ back/          # Feature backend code (optional)
‚îÇ
‚îî‚îÄ‚îÄ globals/ui/            # Shared components (AFTER reuse)
    ‚îú‚îÄ‚îÄ cn/                # ‚ö†Ô∏è DO NOT MODIFY - Managed by shadcn-solid CLI
    ‚îÇ   ‚îú‚îÄ‚îÄ utils.ts       # cn() utility for CSS classes
    ‚îÇ   ‚îî‚îÄ‚îÄ components/ui/ # Components generated by CLI (accordion, button, etc.)
    ‚îú‚îÄ‚îÄ molecules/         # Shared molecular components
    ‚îÇ   ‚îú‚îÄ‚îÄ Counter.tsx
    ‚îÇ   ‚îú‚îÄ‚îÄ AccordionQA.tsx
    ‚îÇ   ‚îî‚îÄ‚îÄ Focus.tsx
    ‚îú‚îÄ‚îÄ organisms/         # Shared complex components
    ‚îÇ   ‚îî‚îÄ‚îÄ HeadLinks.tsx
    ‚îú‚îÄ‚îÄ helpers/           # Shared UI utility functions
    ‚îÇ   ‚îú‚îÄ‚îÄ fcc.ts        # Component helpers
    ‚îÇ   ‚îú‚îÄ‚îÄ seo.ts        # SEO helpers
    ‚îÇ   ‚îî‚îÄ‚îÄ types.ts      # TypeScript types
    ‚îú‚îÄ‚îÄ signals/           # Shared global state
    ‚îÇ   ‚îú‚îÄ‚îÄ counter.ts
    ‚îÇ   ‚îî‚îÄ‚îÄ lang.ts
    ‚îî‚îÄ‚îÄ styles/            # Global styles
        ‚îî‚îÄ‚îÄ app.css
```

### üéØ Organization Rules

1. **ALWAYS start in `src/features/[feature-name]/front/`**
   - Create your components in `front/components/` first
   - Create local signals in `front/signals/`
   - Frontend utilities in `front/utils/`

2. **Migration to `globals/` only if reused**
   - If a component is used in 2+ features/routes ‚Üí move to
     `globals/ui/molecules/` or `globals/ui/organisms/`
   - If a signal is used in 2+ features ‚Üí move to `globals/ui/signals/`

3. **‚ö†Ô∏è NEVER modify `src/globals/ui/cn/components/ui/`**
   - These components are generated by the `shadcn-solid` CLI
   - To add a new primitive component:
     `pnpm dlxshadcn-solid@latest add [component]`
   - Do not manually edit these files

### TypeScript Path Aliases

Use these aliases in your imports:

```typescript
import { cn } from '~cn/utils';
import type { Component } from '~ui/helpers/types';
import '~styles/app.css';
// or
import { cn } from '~/globals/ui/cn/utils';
```

## Development Principles

### 1. SolidJS Reactivity

```tsx
import { createSignal, createEffect, createMemo } from 'solid-js';

// Signals for local state
const [count, setCount] = createSignal(0);

// Memos for computed values
const doubled = createMemo(() => count() * 2);

// Effects for side-effects
createEffect(() => {
  console.log('Count changed:', count());
});
```

### 2. Components based on Kobalte UI

Kobalte UI provides accessible primitives. Use them as a base:

```tsx
import { Accordion as AccordionPrimitive } from '@kobalte/core/accordion';
import type { AccordionTriggerProps } from '@kobalte/core/accordion';
import type { PolymorphicProps } from '@kobalte/core/polymorphic';
import { type ValidComponent, splitProps } from 'solid-js';
import { cn } from '~cn/utils';

type AccordionTriggerCustomProps<T extends ValidComponent = 'button'> =
  AccordionTriggerProps<T> & {
    class?: string;
  };

const AccordionTrigger = <T extends ValidComponent = 'button'>(
  props: PolymorphicProps<T, AccordionTriggerCustomProps<T>>,
) => {
  const [local, rest] = splitProps(props as AccordionTriggerCustomProps, [
    'class',
    'children',
  ]);

  return (
    <AccordionPrimitive.Trigger
      class={cn(
        'flex items-center justify-between py-4 text-sm font-medium',
        'hover:underline focus-visible:ring-2',
        local.class,
      )}
      {...rest}
    >
      {local.children}
    </AccordionPrimitive.Trigger>
  );
};
```

### 3. Styling with Tailwind CSS v4

```tsx
// cn() function to merge classes
import { cn } from '~cn/utils';

// Basic usage
<div class={cn('bg-blue-500', 'text-white', 'p-4')} />

// With conditions
<div class={cn(
  'px-4 py-2 rounded',
  isActive() && 'bg-blue-500',
  !isActive() && 'bg-gray-300',
)} />

// With class-variance-authority for variants
import { cva, type VariantProps } from 'class-variance-authority';

const buttonVariants = cva(
  'inline-flex items-center justify-center rounded-md font-medium transition-colors',
  {
    variants: {
      variant: {
        default: 'bg-orange-400 text-orange-400 hover:bg-orange-400/90',
        destructive: 'bg-destructive text-destructive-foreground hover:bg-destructive/90',
        outline: 'border border-input bg-background hover:bg-accent',
      },
      size: {
        default: 'h-10 px-4 py-2',
        sm: 'h-9 rounded-md px-3',
        lg: 'h-11 rounded-md px-8',
      },
    },
    defaultVariants: {
      variant: 'default',
      size: 'default',
    },
  },
);
```

### 4. Accessibility (WCAG 2.1)

All components must be accessible:

```tsx
// ‚úÖ Best practices
<button
  aria-label="Close dialog"
  aria-pressed={isOpen()}
  onClick={toggle}
>
  {/* Content */}
</button>

// Labels and descriptions
<input
  id="email"
  aria-describedby="email-help"
  aria-required="true"
/>
<p id="email-help">Enter your email address</p>

// Keyboard navigation
<div
  tabindex={0}
  onKeyDown={(e) => {
    if (e.key === 'Enter' || e.key === ' ') {
      handleClick();
    }
  }}
/>
```

### 5. Strict TypeScript

```tsx
import type { Component, ParentProps, Accessor } from 'solid-js';
import type { JSX } from 'solid-js';

// Types for props
interface ButtonProps {
  variant?: 'primary' | 'secondary' | 'destructive';
  size?: 'sm' | 'md' | 'lg';
  disabled?: boolean;
  onClick?: () => void;
  class?: string;
}

// Typed component with children
const Button: Component<ParentProps<ButtonProps>> = props => {
  return (
    <button
      class={cn(
        buttonVariants({ variant: props.variant, size: props.size }),
        props.class,
      )}
      disabled={props.disabled}
      onClick={props.onClick}
      type='button'
    >
      {props.children}
    </button>
  );
};

// Component with Accessor for reactivity
const Counter: Component<{
  count: Accessor<number>;
  onIncrement: () => void;
}> = props => {
  return (
    <div>
      <span>Count: {props.count()}</span>
      <button onClick={props.onIncrement}>+</button>
    </div>
  );
};
```

### 6. Dark Mode

The project supports dark mode with `data-kb-theme="dark"`:

```tsx
// Tailwind classes with dark mode
<div class='bg-white dark:bg-gray-900 text-gray-900 dark:text-white'>
  {/* Content */}
</div>;

// Tailwind configuration (already in place)
// tailwind.config.ts
export default {
  darkMode: ['class', '[data-kb-theme="dark"]'],
  // ...
};
```

## Component Templates

### ‚ö†Ô∏è Base UI Component (primitive) - Use the CLI

**DO NOT create manually in `src/globals/ui/cn/components/ui/`**

Use the shadcn-solid CLI instead:

```bash
# See available components
pnpm dlx shadcn-solid@latest

# Add a component
pnpm dlx shadcn-solid@latest add card
pnpm dlx shadcn-solid@latest add button
pnpm dlx shadcn-solid@latest add input
pnpm dlx shadcn-solid@latest add dialog
pnpm dlx shadcn-solid@latest add dropdown-menu
```

Components will be automatically created in
`src/globals/ui/cn/components/ui/` with:

- Strict TypeScript
- WCAG 2.1 accessibility
- Dark mode support
- Kobalte UI integration
- Optimized Tailwind classes

### Component in a feature (STARTING POINT)

**1. Create first in:
`src/features/[feature-name]/front/components/[Name].tsx`**

```tsx
import type { Component } from 'solid-js';
import { createSignal } from 'solid-js';
import { Card, CardHeader, CardContent } from '~cn/components/ui/card';
import { cn } from '~cn/utils';

interface UserCardProps {
  userId: string;
  name: string;
  email: string;
  class?: string;
}

// Local component to the "user-management" feature
const UserCard: Component<UserCardProps> = props => {
  const [isExpanded, setIsExpanded] = createSignal(false);

  return (
    <Card class={cn('hover:shadow-lg transition-shadow', props.class)}>
      <CardHeader>
        <div class='flex items-center justify-between'>
          <h3 class='text-lg font-semibold'>{props.name}</h3>
          <button
            onClick={() => setIsExpanded(!isExpanded())}
            class='text-sm text-blue-600 hover:underline'
          >
            {isExpanded() ? 'Collapse' : 'See more'}
          </button>
        </div>
      </CardHeader>
      <CardContent>
        <p class='text-sm text-muted-foreground'>{props.email}</p>
        {isExpanded() && (
          <div class='mt-4'>
            <p>ID: {props.userId}</p>
            {/* More details... */}
          </div>
        )}
      </CardContent>
    </Card>
  );
};

export default UserCard;
```

**2. If reused elsewhere, move to: `src/globals/ui/molecules/[Name].tsx`**

```tsx
import type { Component } from 'solid-js';
import { createSignal } from 'solid-js';
import { Card, CardHeader, CardContent } from '~cn/components/ui/card';
import { cn } from '~cn/utils';

interface StatsCardProps {
  title: string;
  value: string | number;
  description?: string;
  icon?: Component;
  variant?: 'default' | 'success' | 'warning' | 'danger';
  class?: string;
}

const StatsCard: Component<StatsCardProps> = props => {
  const variantStyles = {
    default: 'border-gray-200',
    success: 'border-green-500',
    warning: 'border-yellow-500',
    danger: 'border-red-500',
  };

  return (
    <Card
      class={cn(
        'border-l-4',
        variantStyles[props.variant || 'default'],
        props.class,
      )}
    >
      <CardHeader>
        <div class='flex items-center justify-between'>
          <h3 class='text-sm font-medium text-muted-foreground'>
            {props.title}
          </h3>
          {props.icon && <props.icon />}
        </div>
      </CardHeader>
      <CardContent>
        <div class='text-2xl font-bold'>{props.value}</div>
        {props.description && (
          <p class='text-xs text-muted-foreground mt-2'>
            {props.description}
          </p>
        )}
      </CardContent>
    </Card>
  );
};

export default StatsCard;
```

### Signal local to a feature (STARTING POINT)

**1. Create first in:
`src/features/[feature-name]/front/signals/[name].ts`**

```tsx
// src/features/authentication/front/signals/auth.ts
import { createSignal } from 'solid-js';

export interface User {
  id: string;
  email: string;
  name: string;
}

const [user, setUser] = createSignal<User | null>(null);
const [isLoading, setIsLoading] = createSignal(false);

export const useAuth = () => {
  const login = async (email: string, password: string) => {
    setIsLoading(true);
    try {
      // Login logic
      const userData = await loginAPI(email, password);
      setUser(userData);
    } finally {
      setIsLoading(false);
    }
  };

  const logout = () => {
    setUser(null);
  };

  return {
    user,
    isLoading,
    login,
    logout,
    isAuthenticated: () => user() !== null,
  };
};
```

**2. If reused in 2+ features, move to:
`src/globals/ui/signals/[name].ts`**

### Shared global signal

Create in: `src/globals/ui/signals/[name].ts` (only after reuse validation)

```tsx
// src/globals/ui/signals/theme.ts
import { createSignal } from 'solid-js';

export type Theme = 'light' | 'dark';

const [theme, setTheme] = createSignal<Theme>('light');

export const useTheme = () => {
  const toggleTheme = () => {
    setTheme(prev => (prev === 'light' ? 'dark' : 'light'));
    document.documentElement.setAttribute(
      'data-kb-theme',
      theme() === 'dark' ? 'dark' : 'light',
    );
  };

  return {
    theme,
    setTheme,
    toggleTheme,
  };
};
```

Use in a component:

```tsx
// src/globals/ui/molecules/ThemeToggle.tsx
import type { Component } from 'solid-js';
import { useTheme } from '~signals/theme';
import { Moon, Sun } from 'lucide-react';

const ThemeToggle: Component = () => {
  const { theme, toggleTheme } = useTheme();

  return (
    <button
      onClick={toggleTheme}
      class='p-2 rounded-lg hover:bg-accent transition-colors'
      aria-label='Toggle theme'
    >
      {theme() === 'light' ? <Moon size={20} /> : <Sun size={20} />}
    </button>
  );
};

export default ThemeToggle;
```

### Component with validation (Valibot)

```tsx
import { createSignal } from 'solid-js';
import * as v from 'valibot';
import type { Component } from 'solid-js';
import { cn } from '~cn/utils';

// Valibot validation schema
const emailSchema = v.pipe(
  v.string('Email required'),
  v.email('Invalid email'),
);

const EmailInput: Component = () => {
  const [email, setEmail] = createSignal('');
  const [error, setError] = createSignal('');

  const handleChange = (e: Event) => {
    const value = (e.target as HTMLInputElement).value;
    setEmail(value);

    // Validation with Valibot
    const result = v.safeParse(emailSchema, value);
    setError(result.success ? '' : result.issues[0].message);
  };

  return (
    <div>
      <input
        type='email'
        value={email()}
        onInput={handleChange}
        class={cn(
          'px-3 py-2 border rounded-md',
          error() && 'border-red-500',
        )}
        aria-invalid={!!error()}
        aria-describedby={error() ? 'email-error' : undefined}
      />
      {error() && (
        <p id='email-error' class='text-red-500 text-sm mt-1'>
          {error()}
        </p>
      )}
    </div>
  );
};

export default EmailInput;
```

#### Example of complex schema with Valibot

```tsx
import * as v from 'valibot';

// Registration form schema
const RegisterSchema = v.object({
  email: v.pipe(v.string('Email required'), v.email('Invalid email')),
  password: v.pipe(
    v.string('Password required'),
    v.minLength(8, 'Minimum 8 characters'),
    v.regex(/[A-Z]/, 'Must contain an uppercase letter'),
    v.regex(/[0-9]/, 'Must contain a number'),
  ),
  confirmPassword: v.string('Confirmation required'),
  age: v.pipe(
    v.number('Age required'),
    v.minValue(18, 'Minimum 18 years old'),
  ),
  terms: v.pipe(v.boolean(), v.literal(true, 'You must accept the terms')),
});

// Add custom validation for matching passwords
const RegisterSchemaWithMatch = v.pipe(
  RegisterSchema,
  v.forward(
    v.partialCheck(
      [['password'], ['confirmPassword']],
      input => input.password === input.confirmPassword,
      'Passwords do not match',
    ),
    ['confirmPassword'],
  ),
);

// Infer TypeScript type
type RegisterData = v.InferOutput<typeof RegisterSchemaWithMatch>;
```

````

## Component Creation Checklist

When you create a new component, make sure to:

- [ ] Use strict TypeScript with explicit types
- [ ] Handle the `class` prop for customization
- [ ] Use the `cn()` function to merge classes
- [ ] Implement appropriate ARIA attributes
- [ ] Support keyboard navigation
- [ ] Handle states (hover, focus, disabled, etc.)
- [ ] Support dark mode with Tailwind classes
- [ ] Use `splitProps` to separate local props from native props
      natives
- [ ] Document props with JSDoc comments if necessary
- [ ] Test accessibility (contrast ratio, screen readers, etc.)
- [ ] Use Kobalte UI as a base if a primitive exists
- [ ] **Always start in `src/features/[feature-name]/`**
- [ ] Migrate to `globals/` only if reused in 2+ features
- [ ] **NEVER manually create/modify in `cn/components/ui/`** (use shadcn-solid CLI)

## Resources

### Technical Documentation

- **SolidJS**: Reactivity with signals, effects, memos
- **Kobalte UI**: Accessible primitives (@kobalte/core)
- **Tailwind CSS v4**: Utility styling with @tailwindcss/vite
- **TanStack Router**: File-based routing with TypeScript typing
- **Valibot**: Modular and type-safe schema validation
- **shadcn-solid CLI**: Accessible UI component generator

### Common Patterns

#### SolidJS Show/For directives

```tsx
import { Show, For } from 'solid-js';

// Conditional rendering
<Show when={user()} fallback={<LoginForm />}>
  <UserProfile user={user()!} />
</Show>

// Lists
<For each={items()}>
  {(item, index) => (
    <div>{index()}: {item.name}</div>
  )}
</For>
````

#### Portals for modals

```tsx
import { Portal } from 'solid-js/web';

<Portal mount={document.body}>
  <div class='fixed inset-0 bg-black/50 z-50'>{/* Modal content */}</div>
</Portal>;
```

#### Dynamic imports for code splitting

```tsx
import { lazy } from 'solid-js';

const HeavyComponent = lazy(() => import('./HeavyComponent'));

<Suspense fallback={<div>Loading...</div>}>
  <HeavyComponent />
</Suspense>;
```

---

## üöÄ Recommended Workflow

### Creating a new component

1. **Identify the feature**: Which functionality does this component belong
   to?
   - Example: `authentication`, `dashboard`, `user-profile`, etc.

2. **Create in the feature**

   ```
   src/features/[feature-name]/
   ‚îú‚îÄ‚îÄ front/
   ‚îÇ   ‚îú‚îÄ‚îÄ components/
   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ MyComponent.tsx    ‚Üê Start here
   ‚îÇ   ‚îú‚îÄ‚îÄ signals/
   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ mySignal.ts         ‚Üê Local state
   ‚îÇ   ‚îî‚îÄ‚îÄ utils/
   ‚îÇ       ‚îî‚îÄ‚îÄ helpers.ts           ‚Üê Frontend utilities
   ‚îî‚îÄ‚îÄ back/                        ‚Üê Backend code (optional)
   ```

3. **Develop and test** in the feature context

4. **If reuse is necessary** (2+ features/routes)
   - Move to `src/globals/ui/molecules/` or `organisms/`
   - Move signals to `src/globals/ui/signals/`
   - Update imports

5. **For primitive components** (button, input, card, etc.)
   - Use the CLI: `pnpm dlxshadcn-solid@latest add [component]`
   - Never create manually in `cn/components/ui/`

### Adding a primitive component (via CLI)

```bash
# List available components
pnpm dlxshadcn-solid@latest

# Add a specific component
pnpm dlxshadcn-solid@latest add button
pnpm dlxshadcn-solid@latest add card
pnpm dlxshadcn-solid@latest add dialog
pnpm dlxshadcn-solid@latest add form
pnpm dlxshadcn-solid@latest add input
pnpm dlxshadcn-solid@latest add select
pnpm dlxshadcn-solid@latest add table
```

Components will be created in `src/globals/ui/cn/components/ui/` and will
be ready to use with:

- Full accessibility
- Dark mode support
- Strict TypeScript
- Kobalte UI integration

---

**Important Note**:

- ‚úÖ **ALWAYS** start in `src/features/[feature-name]/front/`
- ‚úÖ Components in `front/components/`, signals in `front/signals/`
- ‚úÖ Migrate to `globals/` **only** if reused
- ‚ùå **NEVER** manually create/modify in `cn/components/ui/`
- ‚úÖ Use **Valibot** for validation

If in doubt, refer to existing components in the project as examples.
